{"version":3,"sources":["preact-compat.js"],"names":[],"mappings":"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","file":"preact-compat.js","sourcesContent":["import PropTypes from 'proptypes';\nimport { render as preactRender, h, Component as PreactComponent, hooks } from 'preact';\n\n\nconst DEV = !isProd();\n\nfunction isProd() {\n\tlet prod;\n\ttry { prod = process.env.NODE_ENV==='production'; } catch(e) {}\n\treturn !!prod;\n}\n\n\n// proxy render() since React returns a Component reference.\nfunction render(vnode, parent, callback) {\n\tlet out = preactRender(vnode, parent);\n\tif (typeof callback==='function') callback();\n\treturn out && out._component;\n}\n\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nlet Children = {\n\tmap(children, fn, ctx) {\n\t\tif (ctx && ctx!==children) fn = fn.bind(ctx);\n\t\treturn children.map(fn);\n\t},\n\tforEach(children, fn, ctx) {\n\t\tif (ctx && ctx!==children) fn = fn.bind(ctx);\n\t\tchildren.forEach(fn);\n\t},\n\tcount(children) {\n\t\treturn children.length;\n\t},\n\tonly(children) {\n\t\tif (children.length!==1) throw new Error('Children.only() expects only one child.');\n\t\treturn children[0];\n\t},\n\ttoArray(children) {\n\t\treturn children;\n\t}\n};\n\n\nlet createElement = (...args) => {\n\tlet vnode = h(...args);\n\tapplyClassName(vnode);\n\treturn vnode;\n};\n\n\nlet applyClassName = ({ attributes }) => {\n\tif (!attributes) return;\n\tlet cl = attributes.className || attributes.class;\n\tif (cl) attributes.className = cl;\n};\n\n\nlet extend = (base, ...objs) => {\n\tfor (let i=0; i<objs.length; i++) {\n\t\tfor (let key in objs[i]) {\n\t\t\tif (objs[i].hasOwnProperty(key)) {\n\t\t\t\tlet v = objs[i][key];\n\t\t\t\tif (v!==null && v!==undefined) {\n\t\t\t\t\tbase[key] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn base;\n};\n\n\nlet findDOMNode = component => component.base || component;\n\n\nfunction F(){}\n\nlet createClass = obj => {\n\tlet cl = function() {\n\t\tComponent.call(this);\n\t\textend(this, obj);\n\t\tbindAll(this);\n\t};\n\tF.prototype = Component.prototype;\n\tcl.prototype = new F();\n\tcl.prototype.constructor = cl;\n\treturn cl;\n};\n\nlet bindAll = ctx => {\n\tfor (let i in ctx) {\n\t\tlet v = ctx[i];\n\t\tif (typeof v==='function' && !v.__bound) {\n\t\t\t(ctx[i] = v.bind(ctx)).__bound = true;\n\t\t}\n\t}\n};\n\n\nclass Component extends PreactComponent {\n\tconstructor(...args) {\n\t\tsuper(...args);\n\t\tthis._stateUpdateCallbacks = [];\n\t}\n\n\tgetDOMNode() {\n\t\treturn this.base;\n\t}\n\n\tsetState(state, callback) {\n\t\tsuper.setState(state);\n\t\tif (typeof callback==='function') {\n\t\t\tthis._stateUpdateCallbacks.push(callback);\n\t\t\tcallback();\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(props) {\n\t\tlet defaultProps = this.defaultProps || this.constructor.defaultProps;\n\t\tif (defaultProps) {\n\t\t\tprops = extend({}, defaultProps, props);\n\t\t}\n\n\t\t// add proptype checking\n\t\tif (DEV) {\n\t\t\tlet propTypes = this.propTypes || this.constructor.propTypes;\n\t\t\tif (propTypes) {\n\t\t\t\tfor (let prop in propTypes) {\n\t\t\t\t\tif (propTypes.hasOwnProperty(prop) && typeof propTypes[prop]==='function') {\n\t\t\t\t\t\tlet err = propTypes[prop](props, prop, this.constructor.name, 'prop');\n\t\t\t\t\t\tif (err) throw err;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_render(...args) {\n\t\tlet ret = super._render(...args);\n\n\t\tif (this.props.ref && this.base.getAttribute('ref')!==this.props.ref) {\n\t\t\tthis.base.setAttribute('ref', this.props.ref);\n\t\t}\n\n\t\t// add refs\n\t\tlet refs = this.base.querySelectorAll('[ref]');\n\t\tthis.refs = {};\n\t\tfor (let i=refs.length; i--; ) {\n\t\t\tthis.refs[refs[i].getAttribute('ref')] = refs[i]._component || refs[i];\n\t\t}\n\n\t\tlet cb = this._stateUpdateCallbacks;\n\t\tif (cb) {\n\t\t\tthis._stateUpdateCallbacks = [];\n\t\t\tfor (let i=0; i<cb.length; i++) cb[i]();\n\t\t}\n\n\t\treturn ret;\n\t}\n}\n\n\nexport { PropTypes, Children, render, createClass, createElement, findDOMNode, Component };\nexport default { PropTypes, Children, render, createClass, createElement, findDOMNode, Component };\n"]}